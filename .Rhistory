library(leaflet)
date()
library("tmaptools")
gc_tma <- tmaptools::geocode_OSM("Via dei Roccettini 9,
I-50014 San Domenico di Fiesole")
## Geocoding
gc_tma <- tmaptools::geocode_OSM("Via dei Roccettini 9, San Domenico di Fiesole")
gc_tma
## Geocoding
gc_tma <- tmaptools::geocode_OSM("Via dei Roccettini 9, Firenze")
## Geocoding
gc_tma <- tmaptools::geocode_OSM("Firenze")
m <- leaflet() %>%
addTiles() %>%
addMarkers(lng=gc_tma$coords["x"], lat=gc_tma$coords["y"], popup=place_i)
m
m <- leaflet() %>%
addTiles() %>%
addMarkers(lng=gc_tma$coords["x"], lat=gc_tma$coords["y"], popup="Firenze")
m
grap_path <- "D:/github/geocourse/slides/figure/"
setwd(grap_path)
setwd(grap_path)
pdf("firstpic_firenze.pdf")
qmap("Firenze",zoom=18, maptype = "satellite")
dev.off()
library(ggmap)
setwd(grap_path)
pdf("firstpic_firenze.pdf")
qmap("Firenze",zoom=18, maptype = "satellite")
dev.off()
qmap("Firenze",zoom=16, maptype = "satellite")
library(maptools)
data(wrld_simpl)
kable(head(wrld_simpl@data[,c("ISO2","NAME","AREA","POP2005")]))
library(knitr)
kable(head(wrld_simpl@data[,c("ISO2","NAME","AREA","POP2005")]))
library(ggmap)
?qmap
qmap(location = "baylor university", zoom = 14, source = "osm", scale = 20000)
qmap(location = "Trier", zoom = 14, source = "osm")
?get_openstreetmap
OSM_scale_lookup(zoom = 10)
qmap(location = "Trier", zoom = 10, source = "osm",scale=575000)
qmap(location = "Trier", zoom = 10)
usa_center = as.numeric(geocode("United States"))
USAMap = ggmap(get_googlemap(center=usa_center, scale=2, zoom=4), extent="normal")
USAMap
getwd()
setwd("slides/")
pdf("figure/USAMap.pdf")
USAMap
dev.off()
qmap(location = "Trier", zoom = 10,scale=5)
qmap(location = "Trier", zoom = 10,scale=4)
qmap(location = "Trier", zoom = 14,scale=4)
triermap <- qmap(location = "Trier", zoom = 14,scale=2)
triermap
setwd("D:/GESIS/data/vg250_3112.utm32s.shape.ebenen/vg250_ebenen")
library(rgdal)
VG250 <- readOGR ("VG250_F.shp","VG250_F")
VG250 <- readOGR ("VG250_GEM.shp","VG250_GEM")
head(VG250@data)
bla <- substr(VG250@data$AGS_0,1,2)
plot(VG250[bla=="11",])
spatsamp <- spsample(VG250[bla=="11",], 100)
spatsamp <- spsample(VG250[bla=="11",], 100,type="random")
spatsamp
# EPSG: 3857
newData<-spTransform(spatsamp, CRS("+init=epsg:3857"))
newData
setwd("D:/GESIS/data/")
plz <- readOGR ("post_pl.shp","post_pl")
spatsamp <- spsample(plz[plz@data$PLZ99=="68239",], 100,type="random")
spatsamp
library(ggmap)
ggmap::revgeocode(spatsamp[1,])
?ggmap::revgeocode
ggmap::revgeocode(as.numeric(spatsamp[1,]))
as.numeric(spatsamp[1,])
spatsamp[1,]
ggmap::revgeocode(as.numeric(spatsamp[1,c("x","y")]))
spatsamp[1,c("x","y")]
ggmap::revgeocode(as.vector(spatsamp[1,]))
spatsamp[1,]$x
ggmap::revgeocode(c(spatsamp[1,]$x,spatsamp[1,]$y))
set.seed(323)
spatsamp <- spsample(plz[plz@data$PLZ99=="68239",], 100,type="random")
spatlist <- list()
spatlist[[i]] <- ggmap::revgeocode(c(spatsamp[i,]$x,spatsamp[i,]$y))
library(ggmap)
spatlist <- list()
for (i in 1:nrow(spatsamp)){
spatlist[[i]] <- ggmap::revgeocode(c(spatsamp[i,]$x,spatsamp[i,]$y))
}
i
nrow(spatsamp)
set.seed(323)
n <- 100
spatsamp <- spsample(plz[plz@data$PLZ99=="68239",], n,type="random")
spatlist <- list()
for (i in 1:n){
spatlist[[i]] <- ggmap::revgeocode(c(spatsamp[i,]$x,spatsamp[i,]$y))
}
spatlist
setwd("D:/github/geocourse/slides")
spatvec <- unlist(spatlist)
spatvec
spatsamp$adress <- spatvec
spatsamp
save(spatsamp,file="../data/spatsamp_68239.RData")
