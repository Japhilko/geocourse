---
title: "Geokodierung"
author: "Jan-Philipp Kolb"
date: "30 August 2018"
output: beamer_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T,eval=F)
```

## Daten einlesen

- Hier wird ein Beispieldatensatz eingelesen, den ich über räumliche Stichproben und reverse geocoding erzeugt habe. 

```{r}
(load("../data/addr_list_t_68239.RData"))
head(addr_list_t)
```

## Geokodierung mit dem Paket `tmaptools`

```{r}
library("tmaptools")
```


```{r}
geocode_OSM(addr_list_t[1])
```


## Alle Adressen geokodieren


```{r,eval=F}

gc_list <- list()

for (i in 1:length(addr_list_t)){
  gc_list[[i]] <- geocode_OSM(addr_list_t[i])
}
```

## Geokodierung mit dem R-Paket `opencage`

- Um dieses Paket zu nutzen muss man sich vorher bei der API registrieren

```{r}
library(opencage)
```



```{r,eval=F}
gc_info <- opencage_forward(placename = "Amsterdam, Van Woustraat")
```

- [opencage Tutorial](https://ropensci.org/tutorials/opencage_tutorial/)

## Das Paket [`geonames`](https://github.com/ropensci/geonames)

<!--
https://cran.r-project.org/web/packages/geonames/README.html
-->


- Ein Account ist notwendig um die meisten Funktionen des Paketes `geonames`zu nutzen.

```{r}
library(geonames)
```

```{r,eval=F}
options(geonamesUsername="myusername")
```

- [Login für Geonames](http://www.geonames.org/login)

- [Link um mit den Geodaten zu arbeiten](http://www.geonames.org/enablefreewebservice)

- [Informationen über den Download](http://www.geonames.org/export/ws-overview.html)

```{r}
library(osmdata)
bbox <- getbb("Mannheim")
```

<!--
x -lon - ost-West Richtung
-->

```{r,eval=F}
erg <- geonames::GNcities(49.649591,8.627236,
                          49.329591,8.307236)
```

<!--
https://cengel.github.io/rspatial/5_Geocoding.nb.html
http://www.datasciencetoolkit.org/

https://github.com/cengel/ArcGIS_geocoding
-->

## Das Paket `googleway`

> Accesses Google Maps APIs to Retrieve Data and Plot Maps

```{r,eval=F,echo=F}
install.packages("googleway")
```

```{r}
library(googleway)
```

- Ein API Schlüssel ist notwendig um die meisten Funktionen des Paketes zu nutzen. 


```{r,eval=F,echo=F}
install.packages("rgeolocate")
# install.packages("ipapi")
install.packages("geoparser")
install.packages("geosapi")
```

<!--
Abschnitt zu Geocoding in diesem Task View:

https://cran.r-project.org/web/views/WebTechnologies.html
-->


```{r,eval=F,echo=F}
library(devtools)
install_github("trestletech/rydn")
devtools::install_github("hrbrmstr/ipapi") # https://github.com/hrbrmstr/ipapi/
devtools::install_github("erzk/PostcodesioR") # https://github.com/ropensci/PostcodesioR/
```

